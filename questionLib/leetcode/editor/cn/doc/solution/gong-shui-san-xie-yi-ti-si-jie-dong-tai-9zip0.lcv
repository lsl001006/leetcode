## é€’æ¨å®ç°åŠ¨æ€è§„åˆ’

æ—¢ç„¶è½¬ç§»æ–¹ç¨‹éƒ½ç»™å‡ºäº†ï¼Œç›´æ¥æ ¹æ®è½¬ç§»æ–¹ç¨‹ä»å¤´åˆ°å°¾é€’é€’æ¨ä¸€éå³å¯ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    int mod = (int)1e9+7;
    public int fib(int n) {
        if (n <= 1) return n;
        int a = 0, b = 1;
        for (int i = 2; i <= n; i++) {
            int c = a + b;
            c %= mod;
            a = b;
            b = c;
        }
        return b;
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

## é€’å½’å®ç°åŠ¨æ€è§„åˆ’

èƒ½ä»¥ã€Œé€’æ¨ã€å½¢å¼å®ç°åŠ¨æ€è§„åˆ’ï¼Œè‡ªç„¶ä¹Ÿèƒ½ä»¥ã€Œé€’å½’ã€çš„å½¢å¼å®ç°ã€‚

ä¸ºé˜²æ­¢é‡å¤è®¡ç®—ï¼Œæˆ‘ä»¬éœ€è¦åŠ å…¥ã€Œè®°å¿†åŒ–æœç´¢ã€åŠŸèƒ½ï¼ŒåŒæ—¶åˆ©ç”¨æŸä¸ªå€¼ $x$ åœ¨ä¸åŒçš„æ ·ä¾‹ä¹‹é—´å¯èƒ½ä¼šä½œä¸ºâ€œä¸­é—´ç»“æœâ€è¢«é‡å¤è®¡ç®—ï¼Œå¹¶ä¸”è®¡ç®—ç»“æœ $fib(x)$ å›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `static` ä¿®é¥°ç¼“å­˜å™¨ï¼Œä»¥å®ç°è®¡ç®—è¿‡çš„ç»“æœåœ¨æ‰€æœ‰æµ‹è¯•æ ·ä¾‹ä¸­å…±äº«ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    static int mod = (int)1e9+7;
    static int N = 110;
    static int[] cache = new int[N];
    public int fib(int n) {
        if (n <= 1) return n;
        if (cache[n] != 0) return cache[n];
        cache[n] = fib(n - 1) + fib(n - 2);
        cache[n] %= mod;
        return cache[n];
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

## æ‰“è¡¨

ç»è¿‡ã€Œè§£æ³•äºŒã€ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å‘ç°ï¼Œå¯ä»¥åˆ©ç”¨æ•°æ®èŒƒå›´åªæœ‰ $100$ è¿›è¡Œæ‰“è¡¨é¢„å¤„ç†ï¼Œç„¶åç›´æ¥è¿”å›ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    static int mod = (int)1e9+7;
    static int N = 110;
    static int[] cache = new int[N];
    static {
        cache[1] = 1;
        for (int i = 2; i < N; i++) {
            cache[i] = cache[i - 1] + cache[i - 2];
            cache[i] %= mod;
        }
    }
    public int fib(int n) {
        return cache[n];
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼šå°†æ‰“è¡¨é€»è¾‘æ”¾åˆ°æœ¬åœ°æ‰§è¡Œï¼Œå¤æ‚åº¦ä¸º $O(1)$ï¼›å¦åˆ™ä¸º $O(C)$ï¼Œ$C$ ä¸ºå¸¸é‡ï¼Œå›ºå®šä¸º $110$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## çŸ©é˜µå¿«é€Ÿå¹‚

**å¯¹äºæ•°åˆ—é€’æ¨é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨çŸ©é˜µå¿«é€Ÿå¹‚è¿›è¡ŒåŠ é€Ÿï¼Œæœ€å®Œæ•´çš„ä»‹ç»åœ¨ [è¿™é‡Œ](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247488198&idx=1&sn=8272ca6b0ef6530413da4a270abb68bc&chksm=fd9cb9d9caeb30cf6c2defab0f5204adc158969d64418916e306f6bf50ae0c38518d4e4ba146&token=1067450240&lang=zh_CN#rd) è®²è¿‡ã€‚**

å¯¹äºæœ¬é¢˜ï¼ŒæŸä¸ª $f(n)$ ä¾èµ–äº $f(n - 1)$ å’Œ $f(n - 2)$ï¼Œå°†å…¶ä¾èµ–çš„çŠ¶æ€å­˜æˆåˆ—å‘é‡ï¼š

$$
\begin{bmatrix}
f(n - 1)\\
f(n - 2)
\end{bmatrix}
$$

ç›®æ ‡å€¼ $f(n)$ æ‰€åœ¨çŸ©é˜µä¸ºï¼š

$$
\begin{bmatrix}
f(n)\\
f(n - 1)
\end{bmatrix}
$$

æ ¹æ®çŸ©é˜µä¹˜æ³•ï¼Œä¸éš¾å‘ç°ï¼š

$$
\begin{bmatrix}
f(n)\\
f(n - 1)
\end{bmatrix}

=

\begin{bmatrix}
1& 1\\
1& 0
\end{bmatrix}

* 

\begin{bmatrix}
f(n - 1)\\
f(n - 2)
\end{bmatrix}
$$

æˆ‘ä»¬ä»¤ï¼š

$$
mat =
\begin{bmatrix}
1& 1\\
1& 0
\end{bmatrix}
$$

èµ·å§‹æ—¶ï¼Œæˆ‘ä»¬åªæœ‰ $
\begin{bmatrix}
f(1)\\
f(0)
\end{bmatrix}
$ï¼Œæ ¹æ®é€’æ¨å¼å¾—ï¼š

$$
\begin{bmatrix}
f(n)\\
f(n - 1)
\end{bmatrix}

=

mat * mat * ... * mat *

\begin{bmatrix}
f(1)\\
f(0)
\end{bmatrix}
$$

å†æ ¹æ®çŸ©é˜µä¹˜æ³•å…·æœ‰ã€Œç»“åˆå¾‹ã€ï¼Œæœ€ç»ˆå¯å¾—ï¼š

$$
\begin{bmatrix}
f(n)\\
f(n - 1)
\end{bmatrix}

=

mat^{n - 1}

* 

\begin{bmatrix}
f(1)\\
f(0)
\end{bmatrix}
$$

è®¡ç®— $mat^{n - 1}$ å¯ä»¥å¥—ç”¨ã€Œå¿«é€Ÿå¹‚ã€è¿›è¡Œæ±‚è§£ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    int mod = (int)1e9+7;
    long[][] mul(long[][] a, long[][] b) {
        int r = a.length, c = b[0].length, z = b.length;
        long[][] ans = new long[r][c];
        for (int i = 0; i < r; i++) {
            for (int j = 0; j < c; j++) {
                for (int k = 0; k < z; k++) {
                    ans[i][j] += a[i][k] * b[k][j];
                    ans[i][j] %= mod;
                }
            }
        }
        return ans;
    }
    public int fib(int n) {
        if (n <= 1) return n;
        long[][] mat = new long[][]{
            {1, 1},
            {1, 0}
        };
        long[][] ans = new long[][]{
            {1},
            {0}
        };
        int x = n - 1;
        while (x != 0) {
            if ((x & 1) != 0) ans = mul(mat, ans);
            mat = mul(mat, mat);
            x >>= 1;
        }
        return (int)(ans[0][0] % mod);
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼š$O(\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

## å…¶ä»–ã€Œæ‰“è¡¨ã€å†…å®¹

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [401. äºŒè¿›åˆ¶æ‰‹è¡¨](https://leetcode-cn.com/problems/binary-watch/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/binary-watch/solution/gong-shui-san-xie-jian-dan-ti-xue-da-bia-gwn2/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [1137. ç¬¬ N ä¸ªæ³°æ³¢é‚£å¥‘æ•°](https://leetcode-cn.com/problems/n-th-tribonacci-number/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/n-th-tribonacci-number/solution/gong-shui-san-xie-yi-ti-si-jie-die-dai-d-m1ie/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1646. è·å–ç”Ÿæˆæ•°ç»„ä¸­çš„æœ€å¤§å€¼](https://leetcode-cn.com/problems/get-maximum-in-generated-array/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/get-maximum-in-generated-array/solution/gong-shui-san-xie-jian-dan-mo-ni-ti-by-a-sj53/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [é¢è¯•é¢˜ 10.02. å˜ä½è¯ç»„](https://leetcode-cn.com/problems/group-anagrams-lcci/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/group-anagrams-lcci/solution/gong-shui-san-xie-tong-ji-bian-wei-ci-de-0iqe/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/æ‰“è¡¨)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## å…¶ä»–ã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€å†…å®¹

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [552. å­¦ç”Ÿå‡ºå‹¤è®°å½• II](https://leetcode-cn.com/problems/student-attendance-record-ii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/student-attendance-record-ii/solution/gong-shui-san-xie-yi-ti-san-jie-ji-yi-hu-fdfx/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1137. ç¬¬ N ä¸ªæ³°æ³¢é‚£å¥‘æ•°](https://leetcode-cn.com/problems/n-th-tribonacci-number/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/n-th-tribonacci-number/solution/gong-shui-san-xie-yi-ti-si-jie-die-dai-d-m1ie/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/çŸ©é˜µå¿«é€Ÿå¹‚)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~

å¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯å¸…è›‹ã€‚

ä»Šå¤©è§£å†³**äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼**ï¼Œæ˜¯ä¸€é“äºŒå‰æ ‘å±‚æ¬¡éå†çš„å˜å½¢é¢˜ç›®ï¼Œéš¾åº¦ä¸å¤§ï¼Œä»Šå¤©è®©æˆ‘ä»¬ä¸€èµ·æ¥è§£å†³æ‰å®ƒï¼

![637-0.png](https://pic.leetcode-cn.com/1656898227-ncYqaN-637-0.png)

# LeetCode 637ï¼šäºŒå‰æ ‘çš„å±‚å¹³å‡å€¼

## é¢˜æ„

ç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ rootï¼Œä»¥æ•°ç»„çš„å½¢å¼è¿”å›æ¯ä¸€å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼ã€‚

## ç¤ºä¾‹

è¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]
è¾“å‡ºï¼š[3.00000,14.50000,11.00000]è§£é‡Šï¼šç¬¬ 0 å±‚çš„å¹³å‡å€¼ä¸º 3ï¼Œç¬¬ 1 å±‚çš„å¹³å‡å€¼ä¸º 14.5ï¼Œç¬¬ 2 å±‚çš„å¹³å‡å€¼ä¸º 11ã€‚

![637-1.png](https://pic.leetcode-cn.com/1656898237-YddRRQ-637-1.png)

## æç¤º

- æ ‘ä¸­èŠ‚ç‚¹æ•°é‡åœ¨ [1,10^4] èŒƒå›´å†…
- -2^31 <= Node.val <= 2^31 - 1

# é¢˜ç›®è§£æ

è¿™é“äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ï¼Œéš¾åº¦ç®€å•ã€‚

äºŒå‰æ ‘çš„å±‚æ¬¡éå†ä¸å¤ªæ‡‚çš„å¯ä»¥çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š

[ACM é€‰æ‰‹å¸¦ä½ ç©è½¬äºŒå‰æ ‘å±‚æ¬¡éå†ï¼ˆé€’å½’ + éé€’å½’ï¼‰](https://mp.weixin.qq.com/s/3MMgFtLW9BHpguUkHICLkQ)

é‰´äºäºŒå‰æ ‘å±‚æ¬¡éå†ç›¸å…³é¢˜ç›®éš¾åº¦å¿½ç®€å•å¿½ä¸­ç­‰ï¼ŒçœŸçš„å¾ˆè¿·ï¼Œè¿™é“é¢˜å®šä½éš¾åº¦ç®€å•ï¼Œæˆ‘ä¹Ÿåªèƒ½å½’äºé¢˜ç›®é‡Œå¸¦äº†ä¸€ä¸ªâ€œå±‚â€å­—ã€‚

å¤§æ¦‚å¿ƒç†æ´»åŠ¨å°±æ˜¯ï¼šæˆ‘éƒ½å‘Šè¯‰è§£æ³•å°±æ˜¯å±‚æ¬¡éå†äº†ï¼Œä½ è¿˜è¦æˆ‘æ€æ ·ï¼Ÿ

![637-8.jpg](https://pic.leetcode-cn.com/1656898246-eVIOeU-637-8.jpg)

é‚£è¿™é“é¢˜çš„å…·ä½“åšæ³•å°±æ˜¯ï¼š**éå†äºŒå‰æ ‘çš„æ¯ä¸€å±‚ï¼Œè®°å½•è¯¥å±‚çš„èŠ‚ç‚¹æ€»å€¼å’ŒèŠ‚ç‚¹æ•°ï¼Œç„¶åæ±‚è¯¥å±‚å¹³å‡å€¼åŠ å…¥ res ç»“æœé›†ä¸­ï¼Œç›´è‡³éå†å®Œæ•´æ£µäºŒå‰æ ‘ã€‚**

è‡³äºæ¯å±‚çš„éå†ï¼Œæˆ‘ä»¬ä½¿ç”¨é˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„ã€‚

é˜Ÿåˆ—æ˜¯ä¸€ç§**å…ˆè¿›å…ˆå‡º**ï¼ˆFirst in First Outï¼‰çš„æ•°æ®ç»“æ„ï¼Œç®€ç§° **FIFO**ã€‚

å¦‚æœä¸å¤ªäº†è§£é˜Ÿåˆ—çš„ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š

**[ACM é€‰æ‰‹å¸¦ä½ ç©è½¬æ ˆå’Œé˜Ÿåˆ—](https://mp.weixin.qq.com/s/4D0FQiJMJ9wA4_ejkGbwiA)**

**ä½¿ç”¨é˜Ÿåˆ—ä¿å­˜æ¯ä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ŒæŠŠé˜Ÿåˆ—é‡Œçš„æ‰€æœ‰èŠ‚ç‚¹å‡ºé˜Ÿåˆ—ï¼Œç„¶åæŠŠè¿™äº›å‡ºå»èŠ‚ç‚¹å„è‡ªçš„å­èŠ‚ç‚¹å…¥é˜Ÿåˆ—**ã€‚

# å›¾è§£

ä»¥ root = [3,9,20,null,null,15,7] ä¸ºä¾‹ï¼š

![637-2.png](https://pic.leetcode-cn.com/1656898254-mvGtsz-637-2.png)

é¦–å…ˆåˆå§‹åŒ–é˜Ÿåˆ—å’Œç»“æœé›†ï¼Œå°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—ã€‚

![637-3.png](https://pic.leetcode-cn.com/1656898259-URnOVx-637-3.png)

* Python

```Python
res = []
queue = [root]
```

ç¬¬ 1 æ­¥ï¼šé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆå§‹åŒ–å­˜å‚¨å½“å‰å±‚å­©å­èŠ‚ç‚¹çš„åˆ—è¡¨ chilldNodesã€å½“å‰å±‚èŠ‚ç‚¹å’Œ sumã€‚

* Python

```Python
# å­˜å‚¨å½“å‰å±‚çš„å­©å­èŠ‚ç‚¹åˆ—è¡¨
childNodes = []
# å­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹æ•°
cnt = len(queue)
# å­˜å‚¨å½“å‰å±‚èŠ‚ç‚¹å’Œ
sum = 0
```

æ­¤æ—¶ queue ä¸­çš„èŠ‚ç‚¹ä¸ªæ•° cnt = 1ï¼Œå¯¹åº”çš„èŠ‚ç‚¹å€¼ä¸º 3ï¼Œæ‰€ä»¥å½“å‰å±‚çš„èŠ‚ç‚¹å’Œ sum = 3ã€‚

æ­¤æ—¶å°†ç¬¬ 1 å±‚çš„å±‚å¹³å‡å€¼ä¸º 3/1 = 3ï¼Œå°†æ­¤å€¼åŠ å…¥ç»“æœé›† resã€‚

![637-4.png](https://pic.leetcode-cn.com/1656898265-QnwCiw-637-4.png)

* Python

```Python
# æ±‚å½“å‰å±‚èŠ‚ç‚¹å’Œ
for node in queue:
    sum += node.val
res.append(sum/cnt)
```

å°†é˜Ÿåˆ—ä¸­èŠ‚ç‚¹çš„å·¦å­©å­å’Œå³å­©å­ä¾æ¬¡å…¥é˜Ÿåˆ— childNodesã€‚

![637-5.png](https://pic.leetcode-cn.com/1656898270-koBFdT-637-5.png)

* Python

```Python
for node in queue:
    # è‹¥èŠ‚ç‚¹å­˜åœ¨å·¦å­©å­ï¼Œå…¥é˜Ÿ
    if node.left:
        childNodes.append(node.left)
    # è‹¥èŠ‚ç‚¹å­˜åœ¨å³å­©å­ï¼Œå…¥é˜Ÿ
    if node.right:
        childNodes.append(node.right)
```

å°†å½“å‰é˜Ÿåˆ— queue æ›´æ–°ä¸º childNodesï¼Œç»§ç»­è¿›è¡Œä¸‹ä¸€å±‚çš„éå†ã€‚

![637-6.png](https://pic.leetcode-cn.com/1656898298-DhLHPB-637-6.png)

* Python

```Python
# æ›´æ–°é˜Ÿåˆ—ä¸ºä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œç»§ç»­éå†
queue = childNodes
```

ä¹‹åå°±æ˜¯é‡å¤ä¸Šé¢çš„æ“ä½œï¼Œç›´è‡³å…¨éƒ¨éå†å®Œã€‚

![637-7.png](https://pic.leetcode-cn.com/1656898312-rXwutp-637-7.png)

# ä»£ç å®ç°

## Python ä»£ç å®ç°

* Python

```Python
# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, val=0, left=None, right=None):
#         self.val = val
#         self.left = left
#         self.right = right

class Solution:
    def averageOfLevels(self, root: Optional[TreeNode]) -> List[float]:
        if root == None:
            return []

        res = []
        queue = [root]

        while queue:
            # å­˜å‚¨å½“å‰å±‚çš„å­©å­èŠ‚ç‚¹åˆ—è¡¨
            childNodes = []
            # å­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹æ•°
            cnt = len(queue)
            # å­˜å‚¨å½“å‰å±‚èŠ‚ç‚¹å’Œ
            sum = 0
            # æ±‚å½“å‰å±‚èŠ‚ç‚¹å’Œ
            for node in queue:
                sum += node.val
            res.append(sum/cnt)

            for node in queue:
                # è‹¥èŠ‚ç‚¹å­˜åœ¨å·¦å­©å­ï¼Œå…¥é˜Ÿ
                if node.left:
                    childNodes.append(node.left)
                # è‹¥èŠ‚ç‚¹å­˜åœ¨å³å­©å­ï¼Œå…¥é˜Ÿ
                if node.right:
                    childNodes.append(node.right)
            # æ›´æ–°é˜Ÿåˆ—ä¸ºä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œç»§ç»­éå†
            queue = childNodes

        return res
```

## Java ä»£ç å®ç°

* Java

```Java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
class Solution {
    public List<Double> averageOfLevels(TreeNode root) {
        List<Double> res = new ArrayList<Double>();
        if (root == null) {
            return res;
        }
        Queue<TreeNode> queue = new LinkedList<TreeNode>();
        queue.offer(root);
        while (!queue.isEmpty()) {
            // å­˜å‚¨å½“å‰å±‚èŠ‚ç‚¹å’Œ
            double sum = 0;
            // å­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹æ•°
            int cnt = queue.size();
            for (int i = 0; i < cnt; i++) {
                TreeNode node = queue.poll();
                // æ±‚å½“å‰å±‚èŠ‚ç‚¹å’Œ
                sum += node.val;
                // è‹¥èŠ‚ç‚¹å­˜åœ¨å·¦å­©å­ï¼Œå…¥é˜Ÿ
                if (node.left != null) {
                    queue.offer(node.left);
                }
                // è‹¥èŠ‚ç‚¹å­˜åœ¨å³å­©å­ï¼Œå…¥é˜Ÿ
                if (node.right != null) {
                    queue.offer(node.right);
                }
            }
            res.add(sum / cnt);
        }
        return res;
    }
}
```

æœ¬é¢˜è§£ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œå„è¿›å‡ºé˜Ÿåˆ—ä¸€æ¬¡ï¼Œæ‰€ä»¥**æ—¶é—´å¤æ‚åº¦ä¸º O(n)**ã€‚

æ­¤å¤–ï¼Œé¢å¤–ç»´æŠ¤äº†ä¸€ä¸ªé˜Ÿåˆ—å’Œä¿å­˜å½“å‰å±‚å­©å­èŠ‚ç‚¹çš„åˆ—è¡¨ï¼Œæ‰€ä»¥**ç©ºé—´å¤æ‚åº¦ä¸º O(n)**ã€‚

---

**å›¾è§£äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼**åˆ°è¿™å°±ç»“æŸè¾£ï¼Œæˆ‘ç°åœ¨çœŸçš„æ˜¯å¤ªçˆ±å±‚æ¬¡éå†äº†ï¼ŒçœŸå¥½ç”¨ï¼

å¿«æŠŠçˆ±ä»–æ‰“åœ¨å…¬å±ä¸Šï¼

![637-9.jpg](https://pic.leetcode-cn.com/1656898606-IRAUVg-637-9.jpg)

## å†™åœ¨æœ€å

**å¦‚æœä½ è§‰å¾—æœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ°å‘€**

ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»[**å…³æ³¨æˆ‘**](https://cdn.codegoudan.com/img/gzgzhbcwqlgd0-1.png)ï¼Œè§£é”æ›´å¤šå›¾è§£ LeetCodeï¼Œä¸€èµ·ç©è½¬æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼

æˆ‘æ˜¯å¸…è›‹ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ï¼

<br />

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬äºŒå‰æ ‘](https://mp.weixin.qq.com/s/l8jwYfaUuV5ZjFH8CMNw9A)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode äºŒå‰æ ‘çš„å±‚åºéå†â…¡](https://mp.weixin.qq.com/s/4EazbcxlWp7OKiD8cFn8Fw)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://mp.weixin.qq.com/s/MmlenpO4wUrgH7FcDgptiA)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å›¾è§£ LeetCode åˆå¹¶äºŒå‰æ ‘](https://mp.weixin.qq.com/s/766933ZUvJG_AseyirACpg)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACMé€‰æ‰‹å›¾è§£ LeetCode æœ€å¤§äºŒå‰æ ‘](https://mp.weixin.qq.com/s/BzHN5s5YGqkN2eBx_3vP0w)

[**æ¨èé˜…è¯»** ğŸ‘ï¼šACM é€‰æ‰‹å¸¦ä½ ç©è½¬æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦](https://mp.weixin.qq.com/s/Q3LUNACtC8G-x4EMtPGRHA)

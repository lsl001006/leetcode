# è¿™ä¸ªé—®é¢˜å’Œâ€œæœ€å¤šèƒ½å®Œæˆæ’åºçš„å—â€ç›¸ä¼¼ï¼Œä½†ç»™å®šæ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥é‡å¤ï¼Œè¾“å…¥æ•°ç»„æœ€å¤§é•¿åº¦ä¸º2000ï¼Œå…¶ä¸­çš„å…ƒç´ æœ€å¤§ä¸º10**8ã€‚ 
# 
#  arræ˜¯ä¸€ä¸ªå¯èƒ½åŒ…å«é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆå‡ ä¸ªâ€œå—â€ï¼Œå¹¶å°†è¿™äº›å—åˆ†åˆ«è¿›è¡Œæ’åºã€‚ä¹‹åå†è¿æ¥èµ·æ¥ï¼Œä½¿å¾—è¿æ¥çš„ç»“æœå’ŒæŒ‰å‡åºæ’åºåçš„åŸæ•°ç»„ç›¸åŒã€‚
#  
# 
#  æˆ‘ä»¬æœ€å¤šèƒ½å°†æ•°ç»„åˆ†æˆå¤šå°‘å—ï¼Ÿ 
# 
#  ç¤ºä¾‹ 1: 
# 
#  
# è¾“å…¥: arr = [5,4,3,2,1]
# è¾“å‡º: 1
# è§£é‡Š:
# å°†æ•°ç»„åˆ†æˆ2å—æˆ–è€…æ›´å¤šå—ï¼Œéƒ½æ— æ³•å¾—åˆ°æ‰€éœ€çš„ç»“æœã€‚
# ä¾‹å¦‚ï¼Œåˆ†æˆ [5, 4], [3, 2, 1] çš„ç»“æœæ˜¯ [4, 5, 1, 2, 3]ï¼Œè¿™ä¸æ˜¯æœ‰åºçš„æ•°ç»„ã€‚ 
#  
# 
#  ç¤ºä¾‹ 2: 
# 
#  
# è¾“å…¥: arr = [2,1,3,4,4]
# è¾“å‡º: 4
# è§£é‡Š:
# æˆ‘ä»¬å¯ä»¥æŠŠå®ƒåˆ†æˆä¸¤å—ï¼Œä¾‹å¦‚ [2, 1], [3, 4, 4]ã€‚
# ç„¶è€Œï¼Œåˆ†æˆ [2, 1], [3], [4], [4] å¯ä»¥å¾—åˆ°æœ€å¤šçš„å—æ•°ã€‚ 
#  
# 
#  æ³¨æ„: 
# 
#  
#  arrçš„é•¿åº¦åœ¨[1, 2000]ä¹‹é—´ã€‚ 
#  arr[i]çš„å¤§å°åœ¨[0, 10**8]ä¹‹é—´ã€‚ 
#  
# [2,1,3,4,4,4,4]
# [10,2,9,7,6]
# [10,2,9,7,6,8]
# [10,2,9,7,6,8,12]
# [10,2,9,7,6,8,12,9]
# [0,0,1,1,1]
# [1,0,1,3,2]

#  Related Topics æ ˆ è´ªå¿ƒ æ•°ç»„ æ’åº å•è°ƒæ ˆ ğŸ‘ 161 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def maxChunksToSorted(self, arr: [int]) -> int:
        stack = []
        # å•è°ƒé€’å¢æ ˆ
        for num in arr:
            # å¦‚æœnumæ¯”å•è°ƒé€’å¢æ ˆæ ˆé¡¶è¿˜å°ï¼Œåˆ™å¯»æ‰¾æ ˆå†…ç¬¬ä¸€ä¸ªæ¯”numå°çš„å…ƒç´ ï¼Œå…¶ä½™æ¯”numå¤§çš„æ ˆå†…å…ƒç´ éƒ½è¢«å½’ä¸ºä¸€â€œå—â€
            if stack and num < stack[-1]:
                # ä¸ºç»´æŠ¤å•è°ƒæ ˆçš„å•è°ƒæ€§ï¼Œéœ€è¦ä¿å­˜å…¶æ ˆé¡¶å…ƒç´ (å½“å‰æœ€å¤§å€¼)
                head = stack.pop()
                while stack and num < stack[-1]:
                    stack.pop()
                # å½“stackä¸­æ‰€æœ‰æ¯”numå°çš„å…ƒç´ è¢«æ¸…ç©ºï¼Œå°†æ ˆé¡¶å…ƒç´ é‡æ–°æ¥å›å»
                # ç”±äºæ ˆé¡¶å…ƒç´ å¤§äºnumï¼Œä¸ºç»´æŠ¤å•è°ƒæ ˆï¼Œåˆ™numä¸å†åŠ å…¥å•è°ƒæ ˆä¸­
                stack.append(head)
            else:
                # è‹¥num>=stack[-1]æˆ–stackä¸ºç©ºï¼Œåˆ™åŠ å…¥æ­¤æ—¶numå¤§äºæ ˆä¸­å‡ºç°è¿‡çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯ä»¥æˆä¸ºä¸€â€å—â€œ
                stack.append(num)
        # æ ˆçš„é•¿åº¦å³ä¸ºæœ€å¤§å—æ•°
        return len(stack)

# leetcode submit region end(Prohibit modification and deletion)
